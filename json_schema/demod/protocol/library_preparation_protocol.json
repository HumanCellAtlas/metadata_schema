{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "http://schema.dev.data.humancellatlas.org/type/protocol/sequencing/4.4.4/library_preparation_protocol",
    "description": "Information about how a sequencing library was prepared.",
    "additionalProperties": false,
    "required": [
        "describedBy",
        "schema_type",
        "protocol_core",
        "end_bias",
        "library_construction_approach",
        "strand",
        "input_nucleic_acid_molecule"
    ],
    "title": "Library preparation protocol",
    "name": "library_preparation_protocol",
    "type": "object",
    "properties": {
        "describedBy": {
            "description": "The URL reference to the schema.",
            "type": "string",
            "pattern": "^(http|https)://schema.(.*?)humancellatlas.org/type/protocol/sequencing/(([0-9]{1,}.[0-9]{1,}.[0-9]{1,})|([a-zA-Z]*?))/library_preparation_protocol"
        },
        "schema_version": {
            "description": "The version number of the schema in major.minor.patch format.",
            "type": "string",
            "pattern": "^[0-9]{1,}.[0-9]{1,}.[0-9]{1,}$",
            "example": "4.6.1"
        },
        "schema_type": {
            "description": "The type of the metadata schema entity.",
            "type": "string",
            "enum": [
                "protocol"
            ]
        },
        "provenance": {
            "description": "Provenance information added or generated at time of ingest.",
            "required": [
                "document_id",
                "submission_date"
            ],
            "title": "Provenance",
            "name": "provenance",
            "type": "object",
            "properties": {
                "submission_date": {
                    "description": "When project was first submitted to database.",
                    "type": "string",
                    "format": "date-time"
                },
                "submitter_id": {
                    "description": "ID of individual who first submitted project.",
                    "type": "string"
                },
                "update_date": {
                    "description": "When project was last updated.",
                    "type": "string",
                    "format": "date-time"
                },
                "updater_id": {
                    "description": "ID of individual who last updated project.",
                    "type": "string"
                },
                "document_id": {
                    "description": "Identifier for document.",
                    "type": "string",
                    "pattern": ".{8}-.{4}-.{4}-.{4}-.{12}",
                    "comment": "This structure supports the current ingest API. It may change in the future."
                },
                "accession": {
                    "description": "A unique accession for this entity, provided by the broker.",
                    "type": "string"
                }
            }
        },
        "protocol_core": {
            "description": "Information about an intended protocol that was followed in the project.",
            "required": [
                "protocol_id"
            ],
            "title": "Protocol core",
            "name": "protocol_core",
            "type": "object",
            "properties": {
                "protocol_id": {
                    "description": "A unique ID for the protocol.",
                    "type": "string",
                    "user_friendly": "Protocol ID",
                    "guidelines": "Protocol ID should have no spaces."
                },
                "protocol_name": {
                    "description": "A short name for the protocol.",
                    "type": "string",
                    "user_friendly": "Protocol name"
                },
                "protocol_description": {
                    "description": "A general description of the protocol.",
                    "type": "string",
                    "user_friendly": "Protocol description"
                },
                "publication_doi": {
                    "description": "The publication digital object identifier (doi) for the protocol.",
                    "type": "string",
                    "example": "10.1101/193219",
                    "user_friendly": "Publication DOI"
                },
                "protocols_io_doi": {
                    "description": "The protocols.io digital object identifier (doi) for the protocol.",
                    "type": "string",
                    "example": "10.17504/protocols.io.mgjc3un",
                    "user_friendly": "protocols.io DOI"
                },
                "document": {
                    "description": "A filename of a PDF document containing the details of the protocol.",
                    "type": "string",
                    "pattern": "^.*.pdf$",
                    "user_friendly": "Document filename",
                    "example": "my_cool_protocol.pdf"
                }
            }
        },
        "cell_barcode": {
            "description": "Information about barcodes used in a protocol.",
            "required": [
                "barcode_offset",
                "barcode_length",
                "barcode_read"
            ],
            "title": "Barcode",
            "name": "barcode",
            "type": "object",
            "properties": {
                "barcode_read": {
                    "description": "The read in which the barcode is found.",
                    "type": "string",
                    "enum": [
                        "Read 1",
                        "Read 2",
                        "i7 Index",
                        "i5 Index"
                    ],
                    "user_friendly": "Barcode-containing read",
                    "example": "Should be one of: Read 1, Read 2, i7 Index, or i5 Index."
                },
                "barcode_offset": {
                    "description": "0-based offset of start of barcode in read.",
                    "type": "integer",
                    "maximum": 50,
                    "minimum": 0,
                    "example": 0,
                    "user_friendly": "Barcode offset",
                    "guidelines": "Enter 0 for beginning of read."
                },
                "barcode_length": {
                    "description": "Length of barcode in nucleotides.",
                    "type": "integer",
                    "maximum": 50,
                    "minimum": 0,
                    "example": 28,
                    "user_friendly": "Barcode length"
                },
                "white_list_file": {
                    "description": "Name of file containing legitimate barcode sequences.",
                    "type": "string",
                    "guidelines": "Unused for randomly generated barcodes.",
                    "user_friendly": "White list barcode file",
                    "example": "barcode_whitelist_file.txt"
                }
            }
        },
        "input_nucleic_acid_molecule": {
            "description": "A term that may be associated with a biological macromolecule-related ontology term",
            "required": [
                "text"
            ],
            "title": "Biological macromolecule ontology",
            "name": "biological_macromolecule_ontology",
            "type": "object",
            "properties": {
                "text": {
                    "description": "The name of the biological macromolecule being used.",
                    "type": "string",
                    "example": "polyA RNA; mRNA",
                    "user_friendly": "Biological macromolecule"
                },
                "ontology": {
                    "description": "An ontology term identifier in the form prefix:accession",
                    "type": "string",
                    "graph_restriction": {
                        "ontologies": [
                            "obo:efo",
                            "obo:chebi",
                            "obo:obi"
                        ],
                        "classes": [
                            "EFO:0004446"
                        ],
                        "relations": [
                            "rdfs:subClassOf"
                        ],
                        "direct": false,
                        "include_self": false
                    },
                    "example": "OBI:0000869; CHEBI:33699",
                    "user_friendly": "Biological macromolecule ontology ID"
                },
                "ontology_label": {
                    "description": "The preferred label for the ontology term referred to in the ontology field. This may differ from the user-supplied value in the text field",
                    "type": "string",
                    "example": "polyA RNA; messenger RNA",
                    "user_friendly": "Biological macromolecule ontology label"
                }
            }
        },
        "nucleic_acid_source": {
            "description": "Source cells or organelles from which nucleic acid molecules were collected.",
            "type": "string",
            "enum": [
                "bulk cell",
                "single cell",
                "single nucleus",
                "bulk nuclei",
                "mitochondria"
            ],
            "user_friendly": "Nucleic acid source",
            "example": "Should be one of: single cell, bulk cell, single nucleus, bulk nuclei, or mitochondria."
        },
        "library_construction_approach": {
            "description": "A term that may be associated with a process-related ontology term",
            "required": [
                "text"
            ],
            "title": "Library construction ontology",
            "name": "library_construction_ontology",
            "type": "object",
            "properties": {
                "text": {
                    "description": "The name of a library construction approach being used.",
                    "type": "string",
                    "user_friendly": "Library construction",
                    "example": "10X v2 sequencing; Smart-seq2"
                },
                "ontology": {
                    "description": "An ontology term identifier in the form prefix:accession",
                    "type": "string",
                    "graph_restriction": {
                        "ontologies": [
                            "obo:efo"
                        ],
                        "classes": [
                            "OBI:0000711"
                        ],
                        "relations": [
                            "rdfs:subClassOf"
                        ],
                        "direct": false,
                        "include_self": false
                    },
                    "user_friendly": "Library construction ontology ID",
                    "example": "EFO:0009310; EFO:0008931"
                },
                "ontology_label": {
                    "description": "The preferred label for the ontology term referred to in the ontology field. This may differ from the user-supplied value in the text field",
                    "type": "string",
                    "user_friendly": "Library construction ontology label",
                    "example": "10X v2 sequencing; Smart-seq2"
                }
            }
        },
        "library_construction_kit": {
            "description": "Information describing purchased kits or reagents used in a protocol.",
            "title": "Purchased reagents",
            "name": "purchased_reagents",
            "type": "object",
            "properties": {
                "retail_name": {
                    "description": "The retail name of the kit/reagent.",
                    "type": "string",
                    "example": "SureCell WTA 3' Library Prep Kit; CytoTune iPS 2.0 Sendai Reprogramming Kit",
                    "user_friendly": "Retail name"
                },
                "catalog_number": {
                    "description": "The catalog number of the kit/reagent.",
                    "type": "string",
                    "example": "20014279",
                    "user_friendly": "Catalog number"
                },
                "manufacturer": {
                    "description": "The manufacturer of the kit/reagent.",
                    "type": "string",
                    "example": "Illumina; ThermoFisher Scientific",
                    "user_friendly": "Manufacturer"
                },
                "lot_number": {
                    "description": "The batch or lot number of the kit/reagent.",
                    "type": "string",
                    "example": "10001A",
                    "user_friendly": "Batch/lot number"
                },
                "expiry_date": {
                    "description": "The date of expiration for the kit/reagent.",
                    "type": "string",
                    "format": "date",
                    "example": "2018-01-31",
                    "user_friendly": "Expiry date",
                    "guidelines": "Enter the time in date format: yyyy-mm-dd."
                },
                "kit_titer": {
                    "description": "Appropriate titer and volume recommendations found in kit/reagent Certificate of Analysis.",
                    "type": "string",
                    "example": "3.0x10^7",
                    "user_friendly": "Titer"
                }
            }
        },
        "nucleic_acid_conversion_kit": {
            "description": "Information describing purchased kits or reagents used in a protocol.",
            "title": "Purchased reagents",
            "name": "purchased_reagents",
            "type": "object",
            "properties": {
                "retail_name": {
                    "description": "The retail name of the kit/reagent.",
                    "type": "string",
                    "example": "SureCell WTA 3' Library Prep Kit; CytoTune iPS 2.0 Sendai Reprogramming Kit",
                    "user_friendly": "Retail name"
                },
                "catalog_number": {
                    "description": "The catalog number of the kit/reagent.",
                    "type": "string",
                    "example": "20014279",
                    "user_friendly": "Catalog number"
                },
                "manufacturer": {
                    "description": "The manufacturer of the kit/reagent.",
                    "type": "string",
                    "example": "Illumina; ThermoFisher Scientific",
                    "user_friendly": "Manufacturer"
                },
                "lot_number": {
                    "description": "The batch or lot number of the kit/reagent.",
                    "type": "string",
                    "example": "10001A",
                    "user_friendly": "Batch/lot number"
                },
                "expiry_date": {
                    "description": "The date of expiration for the kit/reagent.",
                    "type": "string",
                    "format": "date",
                    "example": "2018-01-31",
                    "user_friendly": "Expiry date",
                    "guidelines": "Enter the time in date format: yyyy-mm-dd."
                },
                "kit_titer": {
                    "description": "Appropriate titer and volume recommendations found in kit/reagent Certificate of Analysis.",
                    "type": "string",
                    "example": "3.0x10^7",
                    "user_friendly": "Titer"
                }
            }
        },
        "end_bias": {
            "description": "The type of tag or end bias the library has.",
            "type": "string",
            "example": "Should be one of: 3 prime tag, 3 prime end bias, 5 prime tag, 5 prime end bias, or full length.",
            "enum": [
                "3 prime tag",
                "3 prime end bias",
                "5 prime tag",
                "5 prime end bias",
                "full length"
            ],
            "user_friendly": "End bias",
            "guidelines": "Enter 'full length' if there is no tag or end bias."
        },
        "primer": {
            "description": "Primer used for cDNA synthesis from RNA.",
            "type": "string",
            "enum": [
                "poly-dT",
                "random"
            ],
            "user_friendly": "Primer",
            "example": "Should be one of: poly-dT, or random."
        },
        "strand": {
            "description": "Library strandedness.",
            "type": "string",
            "enum": [
                "first",
                "second",
                "unstranded",
                "not provided"
            ],
            "example": "Should be one of: first, second, unstranded, or not provided.",
            "user_friendly": "Strand",
            "guidelines": "Enter 'first' if sequenced molecule is only the strand generated during first strand synthesis. Enter 'second' if sequenced molecule is only the strand generated during second strand synthesis. Enter 'unstranded' if both strands were sequenced."
        },
        "spike_in_kit": {
            "description": "Information describing purchased kits or reagents used in a protocol.",
            "title": "Purchased reagents",
            "name": "purchased_reagents",
            "type": "object",
            "properties": {
                "retail_name": {
                    "description": "The retail name of the kit/reagent.",
                    "type": "string",
                    "example": "SureCell WTA 3' Library Prep Kit; CytoTune iPS 2.0 Sendai Reprogramming Kit",
                    "user_friendly": "Retail name"
                },
                "catalog_number": {
                    "description": "The catalog number of the kit/reagent.",
                    "type": "string",
                    "example": "20014279",
                    "user_friendly": "Catalog number"
                },
                "manufacturer": {
                    "description": "The manufacturer of the kit/reagent.",
                    "type": "string",
                    "example": "Illumina; ThermoFisher Scientific",
                    "user_friendly": "Manufacturer"
                },
                "lot_number": {
                    "description": "The batch or lot number of the kit/reagent.",
                    "type": "string",
                    "example": "10001A",
                    "user_friendly": "Batch/lot number"
                },
                "expiry_date": {
                    "description": "The date of expiration for the kit/reagent.",
                    "type": "string",
                    "format": "date",
                    "example": "2018-01-31",
                    "user_friendly": "Expiry date",
                    "guidelines": "Enter the time in date format: yyyy-mm-dd."
                },
                "kit_titer": {
                    "description": "Appropriate titer and volume recommendations found in kit/reagent Certificate of Analysis.",
                    "type": "string",
                    "example": "3.0x10^7",
                    "user_friendly": "Titer"
                }
            }
        },
        "spike_in_dilution": {
            "description": "Dilution of spike-in.",
            "type": "integer",
            "maximum": 1000000,
            "minimum": 1,
            "user_friendly": "Spike-in dilution",
            "example": 100
        },
        "umi_barcode": {
            "description": "Information about barcodes used in a protocol.",
            "required": [
                "barcode_offset",
                "barcode_length",
                "barcode_read"
            ],
            "title": "Barcode",
            "name": "barcode",
            "type": "object",
            "properties": {
                "barcode_read": {
                    "description": "The read in which the barcode is found.",
                    "type": "string",
                    "enum": [
                        "Read 1",
                        "Read 2",
                        "i7 Index",
                        "i5 Index"
                    ],
                    "user_friendly": "Barcode-containing read",
                    "example": "Should be one of: Read 1, Read 2, i7 Index, or i5 Index."
                },
                "barcode_offset": {
                    "description": "0-based offset of start of barcode in read.",
                    "type": "integer",
                    "maximum": 50,
                    "minimum": 0,
                    "example": 0,
                    "user_friendly": "Barcode offset",
                    "guidelines": "Enter 0 for beginning of read."
                },
                "barcode_length": {
                    "description": "Length of barcode in nucleotides.",
                    "type": "integer",
                    "maximum": 50,
                    "minimum": 0,
                    "example": 28,
                    "user_friendly": "Barcode length"
                },
                "white_list_file": {
                    "description": "Name of file containing legitimate barcode sequences.",
                    "type": "string",
                    "guidelines": "Unused for randomly generated barcodes.",
                    "user_friendly": "White list barcode file",
                    "example": "barcode_whitelist_file.txt"
                }
            }
        },
        "library_preamplification_method": {
            "description": "A term that may be associated with a process-related ontology term",
            "required": [
                "text"
            ],
            "title": "Library amplification ontology",
            "name": "library_amplification_ontology",
            "type": "object",
            "properties": {
                "text": {
                    "description": "The name of a library amplification approach being used.",
                    "type": "string",
                    "user_friendly": "Library amplification",
                    "example": "PCR; in vitro transcription"
                },
                "ontology": {
                    "description": "An ontology term identifier in the form prefix:accession",
                    "type": "string",
                    "graph_restriction": {
                        "ontologies": [
                            "obo:efo"
                        ],
                        "classes": [
                            "EFO:0009107"
                        ],
                        "relations": [
                            "rdfs:subClassOf"
                        ],
                        "direct": false,
                        "include_self": false
                    },
                    "user_friendly": "Library amplification ontology ID",
                    "example": "OBI:0000415; EFO:0009013"
                },
                "ontology_label": {
                    "description": "The preferred label for the ontology term referred to in the ontology field. This may differ from the user-supplied value in the text field",
                    "type": "string",
                    "user_friendly": "Library amplification ontology label",
                    "example": "PCR; in vitro transcription"
                }
            }
        },
        "cdna_library_amplification_method": {
            "description": "A term that may be associated with a process-related ontology term",
            "required": [
                "text"
            ],
            "title": "Library amplification ontology",
            "name": "library_amplification_ontology",
            "type": "object",
            "properties": {
                "text": {
                    "description": "The name of a library amplification approach being used.",
                    "type": "string",
                    "user_friendly": "Library amplification",
                    "example": "PCR; in vitro transcription"
                },
                "ontology": {
                    "description": "An ontology term identifier in the form prefix:accession",
                    "type": "string",
                    "graph_restriction": {
                        "ontologies": [
                            "obo:efo"
                        ],
                        "classes": [
                            "EFO:0009107"
                        ],
                        "relations": [
                            "rdfs:subClassOf"
                        ],
                        "direct": false,
                        "include_self": false
                    },
                    "user_friendly": "Library amplification ontology ID",
                    "example": "OBI:0000415; EFO:0009013"
                },
                "ontology_label": {
                    "description": "The preferred label for the ontology term referred to in the ontology field. This may differ from the user-supplied value in the text field",
                    "type": "string",
                    "user_friendly": "Library amplification ontology label",
                    "example": "PCR; in vitro transcription"
                }
            }
        },
        "nominal_length": {
            "description": "Average (insert) size of the fragments being sequenced.",
            "type": "integer",
            "user_friendly": "Nominal length",
            "example": 250
        },
        "nominal_sdev": {
            "description": "Standard deviation of the (insert) size of the fragments being sequenced.",
            "type": "integer",
            "user_friendly": "Nominal standard deviation",
            "example": 30
        }
    }
}